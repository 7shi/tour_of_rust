<html lang="en">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155199982-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-155199982-1');
        </script>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Fira+Sans&display=swap" rel="stylesheet">
        <title>Tour of Rust - Creating Data In Memory</title>
        <link rel="stylesheet" href="tour.css">
        <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="manifest" href="site.webmanifest">
    </head>
    <body>
        <div class="tour">
            <div class="header">
                <span class="title"><a href="index.html">Tour of Rust</a></span>
                
            </div>
            <div class="page">
            <h1>Creating Data In Memory</h1>
            <p>When we <strong>instantiate</strong> a <strong>struct</strong> we have defined, our program creates a set of values that are put side by side in memory.</p>
<p>Programs have a few distinct regions that data can be placed:</p>
<ul>
<li><strong>read-only memory</strong> - this place in a program's memory is for data that never changes. Consider the text in your program (e.g. "Hello World!"), this text's bytes are only ever read from therefore they are placed in this region.</li>
<li><strong>stack memory</strong> - this is a place in a program's memory where data that is defined within a function goes. The location of this memory never changes, because of this compilers can optimize code so stack data is very fast to use. </li>
<li><strong>heap memory</strong> - this is a place in a program's memory is for data that is created while the application is running. Memory in this region may be added, moved, removed. Because locations aren't fixed, it's generally considered slower to use, but it allows for much more creative usages of memory.  When data is added to this region we call it an <strong>allocation</strong>. When data is removed from this section we call it a <strong>deallocation</strong>.</li>
</ul>
<p>Look in our example to the right:</p>
<ul>
<li>The text inside the quotes is read only data (e.g. "fred"), therefore it is placed in read only memory</li>
<li>The function call <code>String::from</code> creates a String (text that can be changed at runtime) from the read-only text. Because strings often get changed at runtime, the data is placed on the heap. The function <code>from</code> returns a reference to that location in memory (More on this in an upcoming chapter.)</li>
<li>Finally our two friends <em>fred</em> and <em>sara</em> have data structures that will always have fixed locations in our program, so they are placed in stack memory. Note that only a reference ( represented by a integer ) is stored in the data structure within the stack that points to the String in the heap.</li>
</ul>
            </div>
            <div class="code">
            <iframe width="100%" src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=struct%20Creature%20%7B%0A%20%20%20%20animal_type%3A%20String%2C%0A%20%20%20%20name%3A%20String%2C%0A%20%20%20%20arms%3A%20i32%2C%0A%20%20%20%20legs%3A%20i32%2C%0A%20%20%20%20weapon%3A%20String%2C%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20%2F%2F%20We%20instantiate%20structure%20on%20the%20stack%0A%20%20%20%20let%20fred%20%3D%20Creature%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20function%20call%20instantiates%20our%20string%20into%20the%20heap%0A%20%20%20%20%20%20%20%20animal_type%3A%20String%3A%3Afrom(%22octopus%22)%2C%0A%20%20%20%20%20%20%20%20name%3A%20String%3A%3Afrom(%22Fred%22)%2C%0A%20%20%20%20%20%20%20%20arms%3A%208%2C%0A%20%20%20%20%20%20%20%20legs%3A%200%2C%0A%20%20%20%20%20%20%20%20weapon%3A%20String%3A%3Afrom(%22beak%22)%2C%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20let%20sarah%20%3D%20Creature%20%7B%0A%20%20%20%20%20%20%20%20animal_type%3A%20String%3A%3Afrom(%22fish%22)%2C%0A%20%20%20%20%20%20%20%20name%3A%20String%3A%3Afrom(%22Sarah%22)%2C%0A%20%20%20%20%20%20%20%20arms%3A%202%2C%0A%20%20%20%20%20%20%20%20legs%3A%200%2C%0A%20%20%20%20%20%20%20%20weapon%3A%20String%3A%3Afrom(%22none%22)%2C%0A%20%20%20%20%7D%3B%0A%7D%0A" scrolling="no" frameborder="no" allowtransparency="true" allowfullscreen="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals"></iframe>
            </div>
        </div>
    </body>
</html>